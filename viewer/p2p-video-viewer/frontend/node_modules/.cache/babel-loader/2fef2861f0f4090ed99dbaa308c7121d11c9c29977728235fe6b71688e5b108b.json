{"ast":null,"code":"import ToggleSwitch from '@/components/ToggleSwitch.vue';\nimport { listPeers, getStats, togglePeer } from '@/services/peerApi';\nexport default {\n  name: 'PeerPage',\n  components: {\n    ToggleSwitch\n  },\n  data() {\n    return {\n      peers: [],\n      stats: {},\n      timer: null\n    };\n  },\n  async mounted() {\n    await this.refresh();\n    this.timer = setInterval(this.refresh, 1000);\n  },\n  unmounted() {\n    if (this.timer) clearInterval(this.timer);\n  },\n  methods: {\n    async refresh() {\n      this.peers = await listPeers();\n      this.stats = await getStats();\n    },\n    async change(p, enabled) {\n      await togglePeer(p.pid, enabled);\n      p.is_enabled = enabled;\n    }\n  }\n};","map":{"version":3,"names":["ToggleSwitch","listPeers","getStats","togglePeer","name","components","data","peers","stats","timer","mounted","refresh","setInterval","unmounted","clearInterval","methods","change","p","enabled","pid","is_enabled"],"sources":["/home/cracken/project/p2p-video-accelerator/viewer/p2p-video-viewer/frontend/src/views/PeerPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"top\">\n        <span>自身NAT穿透类型：{{ stats.nat_type || '未知' }}</span>\n        <span>  总节点数：{{ stats.total_peers || 0 }}</span>\n      </div>\n      <div class=\"table\">\n        <div class=\"thead\">\n          <div>pid</div><div>在线</div><div>下行速度(MB/s)</div><div>上行速度(KB/s)</div><div>总下行(MB)</div><div>总上行(KB)</div><div>启用</div>\n        </div>\n        <div class=\"row\" v-for=\"p in peers\" :key=\"p.pid\">\n          <div>{{ p.pid }}</div>\n          <div>{{ p.is_online ? '是' : '否' }}</div>\n          <div>{{ p.download_speed }}</div>\n          <div>{{ p.upload_speed }}</div>\n          <div>{{ p.total_download }}</div>\n          <div>{{ p.total_upload }}</div>\n          <div><ToggleSwitch :modelValue=\"p.is_enabled\" @update:modelValue=\"v => change(p, v)\" /></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ToggleSwitch from '@/components/ToggleSwitch.vue'\nimport { listPeers, getStats, togglePeer } from '@/services/peerApi'\nexport default {\n  name: 'PeerPage',\n  components: { ToggleSwitch },\n  data(){ return { peers: [], stats: {}, timer: null } },\n  async mounted(){\n    await this.refresh()\n    this.timer = setInterval(this.refresh, 1000)\n  },\n  unmounted(){ if (this.timer) clearInterval(this.timer) },\n  methods: {\n    async refresh(){ this.peers = await listPeers(); this.stats = await getStats() },\n    async change(p, enabled){ await togglePeer(p.pid, enabled); p.is_enabled = enabled }\n  }\n}\n</script>\n\n<style scoped>\n.top { display: flex; justify-content: flex-start; gap: 16px; margin-bottom: 12px; color: #333 }\n.table { overflow-x: auto; }\n.thead, .row { display: grid; grid-template-columns: 1.2fr .6fr 1.2fr 1.2fr 1.2fr 1.2fr .8fr; gap: 8px; padding: 8px 0; }\n.thead { font-weight: bold; border-bottom: 2px solid var(--border-color) }\n.row { border-bottom: 1px solid var(--border-color) }\n</style>\n"],"mappings":"AA0BA,OAAOA,YAAW,MAAO,+BAA8B;AACvD,SAASC,SAAS,EAAEC,QAAQ,EAAEC,UAAS,QAAS,oBAAmB;AACnE,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IAAEL;EAAa,CAAC;EAC5BM,IAAIA,CAAA,EAAE;IAAE,OAAO;MAAEC,KAAK,EAAE,EAAE;MAAEC,KAAK,EAAE,CAAC,CAAC;MAAEC,KAAK,EAAE;IAAK;EAAE,CAAC;EACtD,MAAMC,OAAOA,CAAA,EAAE;IACb,MAAM,IAAI,CAACC,OAAO,CAAC;IACnB,IAAI,CAACF,KAAI,GAAIG,WAAW,CAAC,IAAI,CAACD,OAAO,EAAE,IAAI;EAC7C,CAAC;EACDE,SAASA,CAAA,EAAE;IAAE,IAAI,IAAI,CAACJ,KAAK,EAAEK,aAAa,CAAC,IAAI,CAACL,KAAK;EAAE,CAAC;EACxDM,OAAO,EAAE;IACP,MAAMJ,OAAOA,CAAA,EAAE;MAAE,IAAI,CAACJ,KAAI,GAAI,MAAMN,SAAS,CAAC,CAAC;MAAE,IAAI,CAACO,KAAI,GAAI,MAAMN,QAAQ,CAAC;IAAE,CAAC;IAChF,MAAMc,MAAMA,CAACC,CAAC,EAAEC,OAAO,EAAC;MAAE,MAAMf,UAAU,CAACc,CAAC,CAACE,GAAG,EAAED,OAAO,CAAC;MAAED,CAAC,CAACG,UAAS,GAAIF,OAAM;IAAE;EACrF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}