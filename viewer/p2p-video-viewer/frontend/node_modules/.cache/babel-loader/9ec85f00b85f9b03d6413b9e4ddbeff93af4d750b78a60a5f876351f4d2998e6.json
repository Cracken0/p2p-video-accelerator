{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"top\"\n};\nconst _hoisted_4 = {\n  class: \"table\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ToggleSwitch = _resolveComponent(\"ToggleSwitch\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", null, \"自身NAT穿透类型：\" + _toDisplayString($data.stats.nat_type || '未知'), 1 /* TEXT */), _createElementVNode(\"span\", null, \" 总节点数：\" + _toDisplayString($data.stats.total_peers || 0), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"thead\"\n  }, [_createElementVNode(\"div\", null, \"pid\"), _createElementVNode(\"div\", null, \"在线\"), _createElementVNode(\"div\", null, \"下行速度(MB/s)\"), _createElementVNode(\"div\", null, \"上行速度(KB/s)\"), _createElementVNode(\"div\", null, \"总下行(MB)\"), _createElementVNode(\"div\", null, \"总上行(KB)\"), _createElementVNode(\"div\", null, \"启用\")], -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.peers, p => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"row\",\n      key: p.pid\n    }, [_createElementVNode(\"div\", null, _toDisplayString(p.pid), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(p.is_online ? '是' : '否'), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(p.download_speed), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(p.upload_speed), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(p.total_download), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(p.total_upload), 1 /* TEXT */), _createElementVNode(\"div\", null, [_createVNode(_component_ToggleSwitch, {\n      modelValue: p.is_enabled,\n      \"onUpdate:modelValue\": v => $options.change(p, v)\n    }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","$data","stats","nat_type","total_peers","_hoisted_4","_Fragment","_renderList","peers","p","key","pid","is_online","download_speed","upload_speed","total_download","total_upload","_createVNode","_component_ToggleSwitch","modelValue","is_enabled","v","$options","change"],"sources":["/home/cracken/project/p2p-video-accelerator/viewer/p2p-video-viewer/frontend/src/views/PeerPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"top\">\n        <span>自身NAT穿透类型：{{ stats.nat_type || '未知' }}</span>\n        <span>  总节点数：{{ stats.total_peers || 0 }}</span>\n      </div>\n      <div class=\"table\">\n        <div class=\"thead\">\n          <div>pid</div><div>在线</div><div>下行速度(MB/s)</div><div>上行速度(KB/s)</div><div>总下行(MB)</div><div>总上行(KB)</div><div>启用</div>\n        </div>\n        <div class=\"row\" v-for=\"p in peers\" :key=\"p.pid\">\n          <div>{{ p.pid }}</div>\n          <div>{{ p.is_online ? '是' : '否' }}</div>\n          <div>{{ p.download_speed }}</div>\n          <div>{{ p.upload_speed }}</div>\n          <div>{{ p.total_download }}</div>\n          <div>{{ p.total_upload }}</div>\n          <div><ToggleSwitch :modelValue=\"p.is_enabled\" @update:modelValue=\"v => change(p, v)\" /></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ToggleSwitch from '@/components/ToggleSwitch.vue'\nimport { listPeers, getStats, togglePeer } from '@/services/peerApi'\nexport default {\n  name: 'PeerPage',\n  components: { ToggleSwitch },\n  data(){ return { peers: [], stats: {}, timer: null } },\n  async mounted(){\n    await this.refresh()\n    this.timer = setInterval(this.refresh, 1000)\n  },\n  unmounted(){ if (this.timer) clearInterval(this.timer) },\n  methods: {\n    async refresh(){ this.peers = await listPeers(); this.stats = await getStats() },\n    async change(p, enabled){ await togglePeer(p.pid, enabled); p.is_enabled = enabled }\n  }\n}\n</script>\n\n<style scoped>\n.top { display: flex; justify-content: flex-start; gap: 16px; margin-bottom: 12px; color: #333 }\n.table { overflow-x: auto; }\n.thead, .row { display: grid; grid-template-columns: 1.2fr .6fr 1.2fr 1.2fr 1.2fr 1.2fr .8fr; gap: 8px; padding: 8px 0; }\n.thead { font-weight: bold; border-bottom: 2px solid var(--border-color) }\n.row { border-bottom: 1px solid var(--border-color) }\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAK;;EAIXA,KAAK,EAAC;AAAO;;;uBANtBC,mBAAA,CAqBM,OArBNC,UAqBM,GApBJC,mBAAA,CAmBM,OAnBNC,UAmBM,GAlBJD,mBAAA,CAGM,OAHNE,UAGM,GAFJF,mBAAA,CAAmD,cAA7C,YAAU,GAAAG,gBAAA,CAAGC,KAAA,CAAAC,KAAK,CAACC,QAAQ,0BACjCN,mBAAA,CAAgD,cAA1C,QAAO,GAAAG,gBAAA,CAAGC,KAAA,CAAAC,KAAK,CAACE,WAAW,sB,GAEnCP,mBAAA,CAaM,OAbNQ,UAaM,G,0BAZJR,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAO,IAChBG,mBAAA,CAAc,aAAT,KAAG,GAAMA,mBAAA,CAAa,aAAR,IAAE,GAAMA,mBAAA,CAAqB,aAAhB,YAAU,GAAMA,mBAAA,CAAqB,aAAhB,YAAU,GAAMA,mBAAA,CAAkB,aAAb,SAAO,GAAMA,mBAAA,CAAkB,aAAb,SAAO,GAAMA,mBAAA,CAAa,aAAR,IAAE,E,wCAElHF,mBAAA,CAQMW,SAAA,QAAAC,WAAA,CARuBN,KAAA,CAAAO,KAAK,EAAVC,CAAC;yBAAzBd,mBAAA,CAQM;MARDD,KAAK,EAAC,KAAK;MAAqBgB,GAAG,EAAED,CAAC,CAACE;QAC1Cd,mBAAA,CAAsB,aAAAG,gBAAA,CAAdS,CAAC,CAACE,GAAG,kBACbd,mBAAA,CAAwC,aAAAG,gBAAA,CAAhCS,CAAC,CAACG,SAAS,8BACnBf,mBAAA,CAAiC,aAAAG,gBAAA,CAAzBS,CAAC,CAACI,cAAc,kBACxBhB,mBAAA,CAA+B,aAAAG,gBAAA,CAAvBS,CAAC,CAACK,YAAY,kBACtBjB,mBAAA,CAAiC,aAAAG,gBAAA,CAAzBS,CAAC,CAACM,cAAc,kBACxBlB,mBAAA,CAA+B,aAAAG,gBAAA,CAAvBS,CAAC,CAACO,YAAY,kBACtBnB,mBAAA,CAA6F,cAAxFoB,YAAA,CAAkFC,uBAAA;MAAnEC,UAAU,EAAEV,CAAC,CAACW,UAAU;MAAG,qBAAiB,EAAEC,CAAC,IAAIC,QAAA,CAAAC,MAAM,CAACd,CAAC,EAAEY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}