{"ast":null,"code":"import { listHistory } from '@/services/historyApi';\nexport default {\n  name: 'HistoryPage',\n  data() {\n    return {\n      history: []\n    };\n  },\n  async mounted() {\n    this.history = await listHistory();\n  },\n  methods: {\n    formatTime(ts) {\n      const d = new Date(ts);\n      const pad = n => String(n).padStart(2, '0');\n      return `${d.getFullYear()}/${pad(d.getMonth() + 1)}/${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`;\n    },\n    open(h) {\n      this.$router.push({\n        path: '/video',\n        query: {\n          rid: h.rid\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["listHistory","name","data","history","mounted","methods","formatTime","ts","d","Date","pad","n","String","padStart","getFullYear","getMonth","getDate","getHours","getMinutes","open","h","$router","push","path","query","rid"],"sources":["/home/cracken/project/p2p-video-accelerator/viewer/p2p-video-viewer/frontend/src/views/HistoryPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"card\" v-for=\"h in history\" :key=\"h.id\" @click=\"open(h)\" style=\"cursor:pointer;\">\n      <div class=\"row\">\n        <div class=\"left\">\n          <div class=\"title\">{{ h.title }}</div>\n          <div class=\"kv\">\n            <span>时间：{{ formatTime(h.play_time) }}</span>\n            <span>  大小(MB):{{ h.file_size }}</span>\n          </div>\n          <div class=\"kv\">\n            <span>播放进度%：{{ h.playback_progress }}</span>\n            <span>  缓存存在：{{ h.cache_exists ? '是' : '否' }}</span>\n          </div>\n          <div class=\"kv\">\n            <span>平均下行(MB/s): {{ h.avg_download_speed }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { listHistory } from '@/services/historyApi'\nexport default {\n  name: 'HistoryPage',\n  data(){ return { history: [] } },\n  async mounted(){ this.history = await listHistory() },\n  methods: {\n    formatTime(ts){ const d = new Date(ts); const pad = n => String(n).padStart(2, '0'); return `${d.getFullYear()}/${pad(d.getMonth()+1)}/${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}` },\n    open(h){ this.$router.push({ path: '/video', query: { rid: h.rid } }) }\n  }\n}\n</script>\n\n<style scoped>\n.row { display: flex; justify-content: space-between; }\n.left { display: flex; flex-direction: column; gap: 6px; }\n.title { font-weight: bold; font-size: 16px; }\n.kv { color: #555; }\n.kv span + span { margin-left: 16px; }\n</style>\n"],"mappings":"AAwBA,SAASA,WAAU,QAAS,uBAAsB;AAClD,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAE;IAAE,OAAO;MAAEC,OAAO,EAAE;IAAG;EAAE,CAAC;EAChC,MAAMC,OAAOA,CAAA,EAAE;IAAE,IAAI,CAACD,OAAM,GAAI,MAAMH,WAAW,CAAC;EAAE,CAAC;EACrDK,OAAO,EAAE;IACPC,UAAUA,CAACC,EAAE,EAAC;MAAE,MAAMC,CAAA,GAAI,IAAIC,IAAI,CAACF,EAAE,CAAC;MAAE,MAAMG,GAAE,GAAIC,CAAA,IAAKC,MAAM,CAACD,CAAC,CAAC,CAACE,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MAAE,OAAO,GAAGL,CAAC,CAACM,WAAW,CAAC,CAAC,IAAIJ,GAAG,CAACF,CAAC,CAACO,QAAQ,CAAC,CAAC,GAAC,CAAC,CAAC,IAAIL,GAAG,CAACF,CAAC,CAACQ,OAAO,CAAC,CAAC,CAAC,IAAIN,GAAG,CAACF,CAAC,CAACS,QAAQ,CAAC,CAAC,CAAC,IAAIP,GAAG,CAACF,CAAC,CAACU,UAAU,CAAC,CAAC,CAAC,EAAC;IAAE,CAAC;IACzMC,IAAIA,CAACC,CAAC,EAAC;MAAE,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE,QAAQ;QAAEC,KAAK,EAAE;UAAEC,GAAG,EAAEL,CAAC,CAACK;QAAI;MAAE,CAAC;IAAE;EACxE;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}